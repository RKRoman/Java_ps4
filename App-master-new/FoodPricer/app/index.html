<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	
		<title>FoodPricer</title>
		
		<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
		
		<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" /> 
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
		
		
		<link rel="stylesheet" href="css/jquery.mobile.flatui.min.css" />
		<script src="js/jquery-1.7.1.min.js"></script>
		<script src="js/jquery.mobile-1.3.1.min.js"></script>
		<script src="js/app.js"></script>
		
		<script type="text/javascript"> 
  function initialize(longitude, latitude) {
    var myLatlng = new google.maps.LatLng(longitude, latitude);
    var myOptions = {
      zoom: 15,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
 
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
 
   
    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        });
    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
    });
  }
 
</script> 
		
	</head>
	
	<body>
		<!-- Главная страница приложения !-->
		<div data-role="page" id="main-page">
			<div data-role="header" data-position="fixed">
				<h1>FoodPricer</h1>
			</div>

			<div data-role="content">
				<div data-role="controlgroup">
					<a href="#map" data-role="button" data-transition="flip" data-icon="gear" data-prefetch onclick="
														$.when(geoLocation.getLocation()).
														then(function(geodata) {
															currentPosition.latitude=geodata.coords.latitude;
															currentPosition.longitude=geodata.coords.longitude;
															initialize(currentPosition.latitude, currentPosition.longitude);
														});">Определить местоположение</a>
					<a href="#settings-page" data-role="button" data-transition="flip" data-icon="gear" data-prefetch onclick="initSettings();">Настройки</a>
				</div>
			</div>
		</div>
		
		<!-- Страница карты-->
		<div data-role="page" data-title="Местоположение" data-add-back-btn="true" id="map">
			<div data-role="header" data-position="fixed">
				<h1>Настройки</h1>
			</div>
			<div id="map_canvas"    data-role="content"  style="height: 400px"></div> 
		</div>	
		
		<!-- Страница настроек !-->
		<div data-role="page" data-title="Настройки" data-add-back-btn="true" id="settings-page">
			<div data-role="header" data-position="fixed">
				<h1>Настройки</h1>
			</div>
			
			<div data-role="content">
				<form>
					<label for="enable-high-accuracy">Режим высокой точности (обратите внимание, что включение данного режима увеличивает расход батареи):</label>
					<select name="enable-high-accuracy" id="enable-high-accuracy" data-role="slider" data-mini="true">
						<option value="false">Выкл</option>
						<option value="true">Вкл</option>
					</select>
				
					<label for="search-range">Радиус поиска (км):</label>
					<input type="range" name="search-range" id="search-range" min="0.1" max="5" step="0.1" data-highlight="true" />
				</form>
				<div data-role="controlgroup">
					<button data-icon="check" onclick="saveSettings();">Сохранить настройки</button>
					<button data-role="button" data-transition="none" data-icon="delete" onclick="restoreSettings();">Восстановить настройки</button>
					<a href="#about-page" data-role="button" data-transition="flip" data-icon="info">О программе</a>
				</div>
				<div>
					<p></p>
				</div>
			</div>
		</div>
		
		<!-- Страница о приложении !-->
		<div data-role="page" data-title="О программе" data-add-back-btn="true" id="about-page">
			<div data-role="header" data-position="fixed">
				<h1>О программе</h1>
			</div>
			
			<div data-role="content">
			</div>
		</div>
		
		<!-- Диалоговое окно, появляющееся в случае выхода из настроек без сохранения изменений !-->
		<div data-role="dialog" id="settings-unsaved-dialog">
			<div data-role="content">
				<p>Изменения не были сохранены. Сохранить изменения?</p>
				<div data-role="controlgroup">
					<a href="#main-page" data-role="button" data-icon="check" onclick="saveSettings();">Сохранить</a>
					<a href="#main-page" data-role="button" data-icon="delete">Отмена</a>
				</div>
			</div>
		</div>
		
	</body>
</html>